import 'package:flutter/cupertino.dart';import 'package:flutter/material.dart';import 'package:movie_db/core/model/movie_resp.dart';import 'package:movie_db/core/model/movie_response.dart';import 'package:movie_db/core/service/service.dart';import 'package:movie_db/ui/detail_screen.dart';class HomeScreen extends StatefulWidget {  @override  _HomeScreenState createState() => _HomeScreenState();}class _HomeScreenState extends State<HomeScreen> with TickerProviderStateMixin {  Service _service;  var imageUrl = 'http://image.tmdb.org/t/p/w500';  var errorImage =      "https://image.shutterstock.com/image-vector/picture-vector-icon-no-image-260nw-1350441335.jpg";  ///TODO tambahkan baris di bawah ini  List<Tab> _tabList = List();  TabController _tabController;  @override  void initState() {    print('init HomeScreen');    _service = Service();    ///TODO tambahkan baris di bawah ini    _tabList.add(new Tab(      text: 'NowPlaying',    ));    _tabList.add(new Tab(      text: 'UpComing',    ));    _tabController = new TabController(length: _tabList.length, vsync: this);    super.initState();  }  @override  Widget build(BuildContext context) {    return Scaffold(        backgroundColor: Colors.white70,        appBar: AppBar(          title: Text('Movie'),          bottom: TabBar(            tabs: _tabList,            controller: _tabController,            indicatorColor: Colors.orange,            indicatorSize: TabBarIndicatorSize.tab,          ),        ),        body: TabBarView(          controller: _tabController,          children: <Widget>[            FutureBuilder<MovieResponse>(                future: _service.getNowPlaying(),                builder: (context, snapshot) {                  if (snapshot.hasData) {                    return ListView.builder(                      itemCount: snapshot.data.results.length,                      itemBuilder: (context, index) {                        ///Tambahin ini                        var data = snapshot.data.results[index];                        return snapshot.data.results == null                            ? Text('Tidak ada Data ')                            : Padding(                                padding: const EdgeInsets.all(8.0),                                child: Row(                                  mainAxisSize: MainAxisSize.max,                                  children: <Widget>[                                    ///Gambar                                    Flexible(                                      flex: 1,                                      fit: FlexFit.tight,                                      child: Container(                                        decoration: BoxDecoration(                                            borderRadius: BorderRadius.all(                                                Radius.circular(10))),                                        height: 150,                                        width: 100,                                        child: snapshot.data.results[index]                                                    .posterPath !=                                                null                                            ? ClipRRect(                                                borderRadius: BorderRadius.all(                                                    Radius.circular(10)),                                                child: Image.network(                                                  imageUrl + data.posterPath,                                                  fit: BoxFit.cover,                                                ))                                            : Icon(Icons.home),                                      ),                                    ),                                    SizedBox(                                      width: 10,                                    ),                                    ///Title                                    Flexible(                                        flex: 2,                                        fit: FlexFit.tight,                                        child: Container(                                          height: 150,                                          decoration: BoxDecoration(                                              borderRadius: BorderRadius.all(                                                  Radius.circular(10)),                                              color: Colors.white,                                              boxShadow: [                                                BoxShadow(                                                    color: Colors.blue,                                                    blurRadius: 3)                                              ]),                                          child: Padding(                                            padding: const EdgeInsets.all(8.0),                                            child: Column(                                              mainAxisSize: MainAxisSize.max,                                              children: <Widget>[                                                Text(                                                  data.title,                                                  style: TextStyle(                                                      fontSize: 20,                                                      fontWeight:                                                          FontWeight.bold),                                                ),                                                SizedBox(                                                  height: 10,                                                ),                                                Text(                                                  data.overview,                                                  overflow:                                                      TextOverflow.ellipsis,                                                  maxLines: 3,                                                )                                              ],                                            ),                                          ),                                        ))                                  ],                                ),                              );                      },                    );                  } else {                    return Center(                      child: CircularProgressIndicator(),                    );                  }                }),            FutureBuilder<MovieResp>(              future: _service.getUpcoming(),              builder: (context, snapshot) {                if (snapshot.hasData) {                  return ListView.builder(                    itemCount: snapshot.data.results.length,                    itemBuilder: (context, index) {                      var data = snapshot.data.results[index];//                      https://github.com/ghozay19/flutter_esa_unggul5                      return InkWell(                          onTap: ()=> Navigator.push(context, CupertinoPageRoute(                              builder: (context) => DetailScreen(movieItem: data,))                          ),                          child: Stack(                        children: <Widget>[                          /// Kotak Judul                          Padding(                            padding: const EdgeInsets.all(8.0),                            child: Row(                              mainAxisSize: MainAxisSize.max,                              children: <Widget>[                                SizedBox(                                  width: 30,                                ),                                Expanded(                                    child: Container(                                  height: 120,                                  decoration: BoxDecoration(                                    color: Colors.white,                                    borderRadius:                                        BorderRadius.all(Radius.circular(8)),                                  ),                                  child: Padding(                                    padding: const EdgeInsets.only(                                        top: 10.0, left: 50),                                    child: ListTile(                                      title: Text(data.title),                                      subtitle: Text(data.releaseDate.toString()),                                    ),                                  ),                                ))                              ],                            ),                          ),                          /// Foto Movie                          Positioned(                            top: 20,                            left: 5,                            child: Container(                                decoration: BoxDecoration(                                    shape: BoxShape.circle,//                                    borderRadius://                                        BorderRadius.all(Radius.circular(10))),                                    color: Colors.white),                                child: Padding(                                  padding: const EdgeInsets.all(8.0),                                  child: CircleAvatar(                                    backgroundImage: NetworkImage(                                      data.posterPath != null                                          ? imageUrl + data.posterPath                                          : errorImage,                                    ),                                    radius: 40,                                  ),                                )),                          ),                        ],                      ));                    },                  );                } else {                  return Center(                    child: CircularProgressIndicator(),                  );                }              },            )          ],        ));  }}